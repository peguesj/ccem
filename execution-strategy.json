{
  "strategy_id": "exec-001",
  "operation_id": "custom-001",
  "timestamp": "2025-10-11T00:00:00Z",
  "execution_modes": {
    "ccem": "Pure CCEM logic - deterministic file operations",
    "claude": "Claude Code assistance - requires LLM for nuance/analysis",
    "ccem>claude": "CCEM orchestrates, Claude handles complex sub-tasks",
    "claude>ccem": "Claude analyzes first, CCEM executes results",
    "claude>ccem>claude": "Iterative: Claude → CCEM → Claude review",
    "CCEMAgent": "Dedicated Claude Code agent with CCEM context"
  },
  "operation_tree": {
    "id": "root",
    "name": "Custom Merge: Total User-Level Consolidation",
    "execution_strategy": "claude>ccem",
    "reasoning": "Claude should analyze all settings for conflicts before CCEM executes merge",
    "parallel_enabled": true,
    "children": [
      {
        "id": "op-001",
        "name": "Consolidate Permissions (87 unique)",
        "execution_strategy": "ccem>claude",
        "reasoning": "CCEM collects all permissions, Claude deduplicates and resolves conflicts",
        "parallel_enabled": false,
        "estimated_duration": "2-3s",
        "risk_level": "medium",
        "children": [
          {
            "id": "op-001-1",
            "name": "Read all project settings files",
            "execution_strategy": "ccem",
            "reasoning": "Pure file read operation, no ambiguity",
            "parallel_enabled": true,
            "estimated_duration": "0.5s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-001-2",
            "name": "Parse and extract permissions",
            "execution_strategy": "ccem",
            "reasoning": "Deterministic JSON parsing",
            "parallel_enabled": true,
            "estimated_duration": "0.3s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-001-3",
            "name": "Deduplicate and merge permissions",
            "execution_strategy": "claude",
            "reasoning": "Requires semantic analysis to identify truly duplicate permissions with different syntax",
            "parallel_enabled": false,
            "estimated_duration": "1-2s",
            "risk_level": "medium",
            "children": [
              {
                "id": "op-001-3-1",
                "name": "Identify semantic duplicates",
                "execution_strategy": "claude",
                "reasoning": "E.g., 'Bash(npm install)' vs 'Bash(npm install:*)' - requires context",
                "parallel_enabled": false,
                "estimated_duration": "0.8s",
                "risk_level": "low",
                "children": []
              },
              {
                "id": "op-001-3-2",
                "name": "Resolve conflicting patterns",
                "execution_strategy": "claude",
                "reasoning": "When multiple projects have overlapping but different glob patterns",
                "parallel_enabled": false,
                "estimated_duration": "0.5s",
                "risk_level": "medium",
                "children": []
              },
              {
                "id": "op-001-3-3",
                "name": "Preserve project-specific permissions",
                "execution_strategy": "claude>ccem",
                "reasoning": "Claude identifies which are project-specific, CCEM tags them",
                "parallel_enabled": false,
                "estimated_duration": "0.4s",
                "risk_level": "low",
                "children": []
              }
            ]
          },
          {
            "id": "op-001-4",
            "name": "Write merged permissions to user settings",
            "execution_strategy": "ccem",
            "reasoning": "Deterministic JSON write operation",
            "parallel_enabled": false,
            "estimated_duration": "0.2s",
            "risk_level": "medium",
            "children": []
          }
        ]
      },
      {
        "id": "op-002",
        "name": "Consolidate MCP Servers (3 unique)",
        "execution_strategy": "ccem",
        "reasoning": "Simple merge of unique MCP server definitions, no conflicts",
        "parallel_enabled": true,
        "estimated_duration": "1s",
        "risk_level": "low",
        "children": [
          {
            "id": "op-002-1",
            "name": "Extract MCP configs from projects",
            "execution_strategy": "ccem",
            "reasoning": "Straightforward JSON extraction",
            "parallel_enabled": true,
            "estimated_duration": "0.3s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-002-2",
            "name": "Merge to user claude_code_config.json",
            "execution_strategy": "ccem",
            "reasoning": "Simple merge, servers have unique names",
            "parallel_enabled": false,
            "estimated_duration": "0.2s",
            "risk_level": "low",
            "children": []
          }
        ]
      },
      {
        "id": "op-003",
        "name": "Move Additional Settings (enableAllProjectMcpServers, etc.)",
        "execution_strategy": "claude>ccem",
        "reasoning": "Claude should analyze which settings to promote to user-level vs keep project-specific",
        "parallel_enabled": true,
        "estimated_duration": "1.5s",
        "risk_level": "medium",
        "children": [
          {
            "id": "op-003-1",
            "name": "Analyze setting scope appropriateness",
            "execution_strategy": "claude",
            "reasoning": "Requires understanding of whether setting should be user-wide or project-specific",
            "parallel_enabled": false,
            "estimated_duration": "0.8s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-003-2",
            "name": "Move appropriate settings",
            "execution_strategy": "ccem",
            "reasoning": "Execute move based on Claude's analysis",
            "parallel_enabled": true,
            "estimated_duration": "0.3s",
            "risk_level": "low",
            "children": []
          }
        ]
      },
      {
        "id": "op-004",
        "name": "Create Security Audit Hook",
        "execution_strategy": "claude>ccem>claude",
        "reasoning": "Claude designs hook, CCEM writes file, Claude validates implementation",
        "parallel_enabled": true,
        "estimated_duration": "3-4s",
        "risk_level": "high",
        "children": [
          {
            "id": "op-004-1",
            "name": "Design hook logic and script",
            "execution_strategy": "claude",
            "reasoning": "Requires security expertise to design proper audit logic",
            "parallel_enabled": false,
            "estimated_duration": "1.5s",
            "risk_level": "medium",
            "children": []
          },
          {
            "id": "op-004-2",
            "name": "Generate hook script files",
            "execution_strategy": "ccem",
            "reasoning": "Write bash/python scripts based on Claude's design",
            "parallel_enabled": true,
            "estimated_duration": "0.5s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-004-3",
            "name": "Update settings.json with hook registration",
            "execution_strategy": "ccem",
            "reasoning": "Deterministic JSON update",
            "parallel_enabled": false,
            "estimated_duration": "0.2s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-004-4",
            "name": "Validate hook syntax and permissions",
            "execution_strategy": "claude",
            "reasoning": "Security validation requires understanding of potential vulnerabilities",
            "parallel_enabled": false,
            "estimated_duration": "0.8s",
            "risk_level": "high",
            "children": []
          }
        ]
      },
      {
        "id": "op-005",
        "name": "Generate User-Level CCEM Command",
        "execution_strategy": "claude",
        "reasoning": "Command needs contextual help, examples, and argument validation logic",
        "parallel_enabled": true,
        "estimated_duration": "2s",
        "risk_level": "low",
        "children": [
          {
            "id": "op-005-1",
            "name": "Define command structure and arguments",
            "execution_strategy": "claude",
            "reasoning": "Requires UX design for intuitive command interface",
            "parallel_enabled": false,
            "estimated_duration": "0.5s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-005-2",
            "name": "Generate contextual help and examples",
            "execution_strategy": "claude",
            "reasoning": "Help text should be tailored to user's actual projects and configs",
            "parallel_enabled": false,
            "estimated_duration": "0.8s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-005-3",
            "name": "Write command markdown file",
            "execution_strategy": "ccem",
            "reasoning": "File write operation based on Claude's generated content",
            "parallel_enabled": false,
            "estimated_duration": "0.2s",
            "risk_level": "low",
            "children": []
          }
        ]
      },
      {
        "id": "op-006",
        "name": "Generate Project-Level CCEM Commands (6 projects)",
        "execution_strategy": "CCEMAgent",
        "reasoning": "Each project needs contextual command - best handled by dedicated agent with full CCEM context",
        "parallel_enabled": true,
        "estimated_duration": "4-5s",
        "risk_level": "low",
        "children": [
          {
            "id": "op-006-1",
            "name": "Analyze each project's specific needs",
            "execution_strategy": "CCEMAgent",
            "reasoning": "Agent understands project structure and can tailor commands accordingly",
            "parallel_enabled": true,
            "estimated_duration": "2s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-006-2",
            "name": "Generate contextual examples per project",
            "execution_strategy": "CCEMAgent",
            "reasoning": "Examples should reference actual project files and structures",
            "parallel_enabled": true,
            "estimated_duration": "1.5s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-006-3",
            "name": "Write command files to each .claude/commands/",
            "execution_strategy": "ccem",
            "reasoning": "Batch file write operation",
            "parallel_enabled": true,
            "estimated_duration": "0.3s",
            "risk_level": "low",
            "children": []
          }
        ]
      },
      {
        "id": "op-007",
        "name": "Create Configuration Reporter Hook",
        "execution_strategy": "claude>ccem",
        "reasoning": "Claude designs notification logic, CCEM implements",
        "parallel_enabled": true,
        "estimated_duration": "2s",
        "risk_level": "low",
        "children": [
          {
            "id": "op-007-1",
            "name": "Design notification message format",
            "execution_strategy": "claude",
            "reasoning": "Message should be informative but not intrusive",
            "parallel_enabled": false,
            "estimated_duration": "0.5s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-007-2",
            "name": "Generate hook script",
            "execution_strategy": "ccem",
            "reasoning": "Simple script generation based on template",
            "parallel_enabled": false,
            "estimated_duration": "0.3s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-007-3",
            "name": "Register SessionStart hook",
            "execution_strategy": "ccem",
            "reasoning": "JSON update to settings.json",
            "parallel_enabled": false,
            "estimated_duration": "0.2s",
            "risk_level": "low",
            "children": []
          }
        ]
      },
      {
        "id": "op-008",
        "name": "Create Backups and Delete Old Settings",
        "execution_strategy": "ccem",
        "reasoning": "Pure file operations with user-configured backup settings",
        "parallel_enabled": true,
        "estimated_duration": "3-5s",
        "risk_level": "high",
        "requires_user_confirmation": true,
        "children": [
          {
            "id": "op-008-1",
            "name": "Create backup archive",
            "execution_strategy": "ccem",
            "reasoning": "Execute tar.gz compression with level 9",
            "parallel_enabled": false,
            "estimated_duration": "2-3s",
            "risk_level": "low",
            "children": []
          },
          {
            "id": "op-008-2",
            "name": "Verify backup integrity",
            "execution_strategy": "ccem",
            "reasoning": "Test archive can be extracted successfully",
            "parallel_enabled": false,
            "estimated_duration": "0.5s",
            "risk_level": "medium",
            "children": []
          },
          {
            "id": "op-008-3",
            "name": "Delete project settings files (6 files)",
            "execution_strategy": "ccem",
            "reasoning": "File deletion after confirmed backup",
            "parallel_enabled": true,
            "estimated_duration": "0.2s",
            "risk_level": "high",
            "requires_user_confirmation": true,
            "children": []
          }
        ]
      }
    ]
  },
  "parallelization_plan": {
    "total_operations": 8,
    "parallel_groups": [
      {
        "group_id": 1,
        "operations": ["op-002", "op-003", "op-004", "op-005", "op-006", "op-007"],
        "can_run_parallel": true,
        "reasoning": "These operations are independent and don't depend on each other"
      },
      {
        "group_id": 2,
        "operations": ["op-001"],
        "can_run_parallel": false,
        "reasoning": "Must complete before other operations to ensure permissions are available"
      },
      {
        "group_id": 3,
        "operations": ["op-008"],
        "can_run_parallel": false,
        "reasoning": "Must run last after all modifications are complete"
      }
    ],
    "estimated_total_duration": "8-12s with parallelization (vs 15-20s sequential)"
  }
}
